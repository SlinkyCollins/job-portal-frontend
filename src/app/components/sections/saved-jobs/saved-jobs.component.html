<!-- saved-jobs.component.html -->
<div class="container-fluid px-3 px-md-4 py-4">
  <!-- Header Section -->
  <div class="row align-items-center mb-4">
    <div class="col-12 col-md-6">
      <h2 class="saved-jobs-title mb-3 mb-md-0">{{ pageTitle }}</h2>
    </div>
    <div class="col-12 col-md-6">
      <div class="d-flex justify-content-md-end">
        <div class="sort-container">
          <label class="sort-label me-2">{{ sortLabel }}:</label>
          <select class="form-select sort-select" [(ngModel)]="selectedSort">
            <option *ngFor="let option of sortOptions" [value]="option.value">
              {{ option.label }}
            </option>
          </select>
        </div>
      </div>
    </div>
  </div>

  <!-- Jobs List -->
  <div class="jobs-container">
    <div class="job-card mb-3" *ngFor="let job of savedJobs; let i = index">
      <div class="card h-100">
        <div class="card-body">
          <!-- Mobile Layout -->
          <div class="d-lg-none mobile-job-layout">
            <div class="d-flex align-items-start">
              <!-- Company Logo -->
              <div class="company-logo me-3">
                <img [src]="job.companyLogo" [alt]="job.companyName + ' logo'" class="logo-img">
              </div>
              
              <!-- Job Content -->
              <div class="flex-grow-1">
                <h5 class="job-title mb-2">{{ job.title }}</h5>
                
                <div class="job-type-container mb-2">
                  <span class="job-type" [ngClass]="getJobTypeClass(job.type)">
                    {{ job.type }}
                  </span>
                </div>
                
                <div class="salary-info mb-2">
                  <span class="salary">${{ job.salary }}</span>
                  <span class="salary-period text-muted"> / {{ job.salaryPeriod }} · {{ job.experienceLevel }}</span>
                </div>
                
                <div class="location mb-2">
                  <span class="text-muted">{{ job.location }}</span>
                </div>
                
                <div class="job-tags">
                  <span *ngFor="let tag of job.tags; let last = last" class="tag">
                    {{ tag }}<span *ngIf="!last">,</span>
                  </span>
                </div>
              </div>
              
              <!-- Actions -->
              <div class="dropdown mobile-dropdown" [style.z-index]="1100 + i">
                <button class="btn action-btn" 
                        data-bs-toggle="dropdown" 
                        aria-expanded="false"
                        [attr.aria-label]="'Actions for ' + job.title">
                  <i class="fas fa-ellipsis-v"></i>
                </button>
                <ul class="dropdown-menu dropdown-menu-end" [style.z-index]="1200 + i">
                  <li><a class="dropdown-item" (click)="onJobAction('view', job)">
                    <i class="fas fa-eye me-2"></i>View Job
                  </a></li>
                  <li><a class="dropdown-item" (click)="onJobAction('share', job)">
                    <i class="fas fa-share me-2"></i>Share
                  </a></li>
                  <li><a class="dropdown-item" (click)="onJobAction('apply', job)">
                    <i class="fas fa-paper-plane me-2"></i>Apply Now
                  </a></li>
                  <li><hr class="dropdown-divider"></li>
                  <li><a class="dropdown-item text-danger" (click)="onJobAction('remove', job)">
                    <i class="fas fa-trash me-2"></i>Remove
                  </a></li>
                </ul>
              </div>
            </div>
          </div>

          <!-- Desktop Layout -->
          <div class="d-none d-lg-block desktop-job-layout">
            <div class="row align-items-center">
              <!-- Company Logo -->
              <div class="col-auto">
                <div class="company-logo">
                  <img [src]="job.companyLogo" [alt]="job.companyName + ' logo'" class="logo-img">
                </div>
              </div>
              
              <!-- Job Information -->
              <div class="col">
                <div class="job-content">
                  <div class="row">
                    <!-- Job Title & Type (Desktop: Left side) -->
                    <div class="col-12 col-lg-6">
                      <h5 class="job-title mb-2">{{ job.title }}</h5>
                      <div class="job-meta mb-2">
                        <span class="job-type" [ngClass]="getJobTypeClass(job.type)">
                          {{ job.type }}
                        </span>
                        <div class="salary-info">
                          <span class="salary">${{ job.salary }}</span>
                          <span class="salary-period text-muted"> / {{ job.salaryPeriod }}</span>
                          <span class="experience-level text-muted"> · {{ job.experienceLevel }}</span>
                        </div>
                      </div>
                    </div>
                    
                    <!-- Location & Tags (Desktop: Right side) -->
                    <div class="col-12 col-lg-5">
                      <div class="location-tags-section">
                        <div class="location mb-2">
                          <i class="fas fa-map-marker-alt text-muted me-1"></i>
                          <span class="text-muted">{{ job.location }}</span>
                        </div>
                        <div class="job-tags">
                          <span *ngFor="let tag of job.tags; let last = last" class="tag">
                            {{ tag }}<span *ngIf="!last">,</span>
                          </span>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <!-- Time Saved (Desktop only) -->
                  <div class="mt-2">
                    <small class="text-muted">Saved {{ job.timeSaved }}</small>
                  </div>
                </div>
              </div>
              
              <!-- Actions -->
              <div class="col-auto">
                <div class="dropdown desktop-dropdown" [style.z-index]="1100 + i">
                  <button class="btn action-btn" 
                          data-bs-toggle="dropdown" 
                          aria-expanded="false"
                          [attr.aria-label]="'Actions for ' + job.title">
                    <i class="fas fa-ellipsis-v"></i>
                  </button>
                  <ul class="dropdown-menu dropdown-menu-end" [style.z-index]="1200 + i">
                    <li><a class="dropdown-item" (click)="onJobAction('view', job)">
                      <i class="fas fa-eye me-2"></i>View Job
                    </a></li>
                    <li><a class="dropdown-item" (click)="onJobAction('share', job)">
                      <i class="fas fa-share me-2"></i>Share
                    </a></li>
                    <li><a class="dropdown-item" (click)="onJobAction('apply', job)">
                      <i class="fas fa-paper-plane me-2"></i>Apply Now
                    </a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item text-danger" (click)="onJobAction('remove', job)">
                      <i class="fas fa-trash me-2"></i>Remove
                    </a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="savedJobs.length === 0" class="empty-state text-center py-5">
    <div class="empty-icon mb-3">
      <i class="fas fa-bookmark fa-3x text-muted"></i>
    </div>
    <h4 class="text-muted">No Saved Jobs</h4>
    <p class="text-muted">Jobs you save will appear here for easy access.</p>
  </div>

  <!-- Pagination -->
  <nav aria-label="Saved jobs pagination" class="mt-4" *ngIf="savedJobs.length > 0">
    <ul class="pagination justify-content-center">
      <li class="page-item" [class.disabled]="currentPage === 1">
        <a class="page-link" (click)="goToPage(currentPage - 1)" aria-label="Previous">
          <i class="fas fa-chevron-left"></i>
        </a>
      </li>
      
      <li *ngFor="let page of visiblePages" 
          class="page-item" 
          [class.active]="page === currentPage">
        <a class="page-link" (click)="goToPage(page)">{{ page }}</a>
      </li>
      
      <li *ngIf="showEllipsis" class="page-item disabled">
        <span class="page-link">...</span>
      </li>
      
      <li *ngIf="totalPages > 5" class="page-item">
        <a class="page-link" (click)="goToPage(totalPages)">{{ totalPages }}</a>
      </li>
      
      <li class="page-item" [class.disabled]="currentPage === totalPages">
        <a class="page-link" (click)="goToPage(currentPage + 1)" aria-label="Next">
          <i class="fas fa-chevron-right"></i>
        </a>
      </li>
    </ul>
  </nav>
</div>
