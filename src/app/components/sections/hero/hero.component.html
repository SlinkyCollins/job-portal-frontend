<section class="hero-section">
  <!-- Hero Screen Icons - Only visible on screens 576px and above -->
  <div class="hero-icons d-none d-sm-block">
    <!-- Top Left Icon -->
    <div class="hero-icon hero-icon-1">
      <img src="/assets/screen_10.png" alt="Business Card">
    </div>

    <!-- Top Right Icon -->
    <div class="hero-icon hero-icon-2">
      <img src="/assets/screen_12.png" alt="Art Card">
    </div>

    <!-- Bottom Left Icon -->
    <div class="hero-icon hero-icon-3">
      <img src="/assets/screen_11.png" alt="Design Card">
    </div>

    <!-- Bottom Right Icon -->
    <div class="hero-icon hero-icon-4">
      <img src="/assets/screen_13.png" alt="UI Design Card">
    </div>
  </div>

  <div class="hero-text">
    <div>
      <h1>Find your job without any hassle.</h1>
      <p>Jobs & Job search. Find jobs in global. Executive jobs & work.</p>
    </div>
    <div class="heroSearch d-flex flex-column flex-md-row gap-md-3">
      <div class="flex-fill customSelectWrapper" [class.open]="isSelectOpen" (click)="toggleSelectOpen()">
        <label for="job_category" class="form-label">Job Categories</label>
        <select id="job_category" class="formSelect form-control search-input" (blur)="isSelectOpen = false"
          [(ngModel)]="searchCategory">
          <!-- default placeholder -->
          <option [ngValue]="null" disabled [selected]="searchCategory === null">Select an option</option>

          <!-- “Clear” option -->
          <option [ngValue]="0">None</option>

          <!-- categories from backend -->
          <option *ngFor="let cat of allCategories" [ngValue]="cat.id">
            {{ cat.name }}
          </option>
        </select>
        <span class="customArrow"></span>
      </div>
      <hr />
      <div class="flex-fill position-relative">
        <label for="location" class="form-label">Location</label>
        <input id="location" type="text" class="form-control search-input" [(ngModel)]="searchLocation"
          placeholder="Lagos, Remote" />
        <i title="Clear Location" class="fas fa-times-circle" (click)="clearLocation()"
          *ngIf="searchLocation && searchLocation.length > 0"
          style="position: absolute; right: 10px; top: 56%; cursor: pointer; color: #7c7c7c; font-size: 1.2rem;"></i>
      </div>
      <hr />
      <div class="flex-fill position-relative">
        <label for="searchBox" class="form-label">Keywords or Title</label>
        <input type="text" class="form-control search-input" [(ngModel)]="searchKeyword" placeholder="Design, branding"
          id="searchBox" style="width: 100%; height: 65%;" />
        <i title="Clear Keyword" class="fas fa-times-circle" (click)="clearKeyword()"
          *ngIf="searchKeyword && searchKeyword.length > 0"
          style="position: absolute; right: 10px; top: 56%; cursor: pointer; color: #7c7c7c; font-size: 1.2rem;"></i>
      </div>
      <hr />
      <div class="d-flex align-items-end">
        <button class="searchBtn" (click)="onSearch()">SEARCH</button>
      </div>
    </div>

    <div class="uploadCV mt-4" *ngIf="!isLoggedIn() || getUserRole() === 'job_seeker'">
      <!-- Upload Button: Show only if no CV uploaded -->
      <label for="cvUpload" [class.disabled]="isUploading || isRefetching" *ngIf="!uploadedCV"
        class="btn px-2 py-2 px-sm-3 py-sm-2 rounded-3 fw-medium">
        {{ isUploading ? 'Uploading...' : isRefetching ? 'Processing...' : 'Upload your CV' }}
        <i *ngIf="!isUploading && !isRefetching" class="bi bi-file-earmark-arrow-up"></i>
        <i *ngIf="isUploading || isRefetching" class="fas fa-spinner fa-spin"></i>
      </label>
      <input type="file" id="cvUpload" hidden (change)="onFileSelected($event)" accept=".pdf,.doc,.docx"
        [disabled]="isUploading || isRefetching" />

      <!-- Progress Bar: Show during upload -->
      <div *ngIf="isUploading" class="custom-progress mt-2 mt-md-0 ms-md-3">
        <div class="custom-progress-bar" [style.width.%]="uploadProgress"></div>
        <span class="progress-text">{{ uploadProgress }}%</span>
      </div>

      <!-- Filename Container: Show after upload, with cancel button -->
      <div *ngIf="uploadedCV && !isUploading" class="filename-container mt-2 mt-md-0 ms-md-3">
        <span class="filename-text">{{ selectedFileName }}</span>
        <button class="cancel-btn" (click)="openDeleteModal()" aria-label="Delete CV">
          <i class="fas fa-times"></i>
        </button>
      </div>
    </div>
  </div>
</section>

<!-- Delete Confirmation Modal -->
<div class="modal-overlay" [class.active]="showDeleteModal" (click)="closeDeleteModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>Confirm Delete</h3>
      <button class="modal-close-btn" (click)="closeDeleteModal()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="modal-body">
      <div class="delete-icon">
        <i class="fas fa-trash"></i>
      </div>
      <p>Are you sure you want to delete your CV?</p>
      <p class="modal-subtitle">This action cannot be undone.</p>
    </div>
    <div class="modal-footer">
      <button class="btn-cancel" (click)="closeDeleteModal()" [disabled]="isDeleting">Cancel</button>
      <button class="btn-confirm" (click)="confirmDelete()" [disabled]="isDeleting">
        {{ isDeleting ? 'Deleting...' : 'Delete' }}
        <i *ngIf="isDeleting" class="fas fa-spinner fa-spin ms-2"></i>
      </button>
    </div>
  </div>
</div>