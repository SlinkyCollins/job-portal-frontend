<div class="admin-page-header fade-in">
    <h2>Admin Settings</h2>
    <p>Manage your account security and preferences</p>
</div>

<div class="row fade-in">
    <div class="col-md-8 col-lg-6 col-xl-5">
        <div class="settings-card">
            
            <div class="card-header-custom">
                <div class="header-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <div>
                    <h5>Change Password</h5>
                    <small>Ensure your account stays secure</small>
                </div>
            </div>

            <div class="card-body-custom">
                <form (ngSubmit)="changePassword()">
                    
                    <div class="form-group mb-4">
                        <label class="form-label required">Current Password</label>
                        <div class="password-wrapper">
                            <input [type]="showCurrentPassword ? 'text' : 'password'" 
                                   class="form-control" 
                                   [(ngModel)]="currentPassword" 
                                   name="currentPassword" 
                                   placeholder="Enter current password"
                                   required>
                            <button type="button" class="visibility-toggle" (click)="toggleVisibility('current')">
                                <i class="fas" [class.fa-eye]="!showCurrentPassword" [class.fa-eye-slash]="showCurrentPassword"></i>
                            </button>
                        </div>
                    </div>

                    <div class="form-group mb-4">
                        <label class="form-label required">New Password</label>
                        <div class="password-wrapper">
                            <input [type]="showNewPassword ? 'text' : 'password'" 
                                   class="form-control" 
                                   [(ngModel)]="newPassword" 
                                   name="newPassword" 
                                   placeholder="Enter new password"
                                   required minlength="6" #newPass="ngModel">
                            <button type="button" class="visibility-toggle" (click)="toggleVisibility('new')">
                                <i class="fas" [class.fa-eye]="!showNewPassword" [class.fa-eye-slash]="showNewPassword"></i>
                            </button>
                        </div>
                        
                        <div *ngIf="newPass.invalid && (newPass.dirty || newPass.touched)" class="validation-msg text-danger">
                            <div *ngIf="newPass.errors?.['minlength']">
                                <i class="fas fa-exclamation-circle me-1"></i> Must be at least 6 characters.
                            </div>
                        </div>
                    </div>

                    <div class="form-group mb-4">
                        <label class="form-label required">Confirm New Password</label>
                        <div class="password-wrapper">
                            <input [type]="showConfirmPassword ? 'text' : 'password'" 
                                   class="form-control" 
                                   [(ngModel)]="confirmPassword" 
                                   name="confirmPassword" 
                                   placeholder="Confirm new password"
                                   required>
                            <button type="button" class="visibility-toggle" (click)="toggleVisibility('confirm')">
                                <i class="fas" [class.fa-eye]="!showConfirmPassword" [class.fa-eye-slash]="showConfirmPassword"></i>
                            </button>
                        </div>
                        
                        <div *ngIf="confirmPassword && newPassword !== confirmPassword" class="validation-msg text-danger">
                            <i class="fas fa-times-circle me-1"></i> Passwords do not match.
                        </div>
                    </div>
                    
                    <button type="submit" class="btn-update w-100" [disabled]="isLoading || !currentPassword || !newPassword">
                        <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
                        {{ isLoading ? 'Updating...' : 'Update Password' }}
                    </button>

                </form>
            </div>
        </div>
    </div>
</div>